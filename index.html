<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="./javascripts/vendor.js"></script>
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.development.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
    ></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"
      integrity="sha512-1/8Tj23BRrWnKZXeBruk6wTnsMJbi/lJsk9bsRgVwb6j5q39n0A00gFjbCTaDo5l5XrPVv4DZXftrJExhRF/Ug=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <title>現在想打球</title>
    <link rel="stylesheet" href="./stylesheets/style.css" />
  </head>
  <body>
    
    <!-- 載入axios套件 -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <div id="root"></div>   
    <script type="text/babel">  
      (async ()=>{
        //取得json資料
        const data = await axios.get("./postData.json");
        const {vb_today_postData, vb_week_postData,bm_today_postData,bm_week_postData} = data.data;
        console.log(vb_today_postData);
        console.log(vb_week_postData);
        console.log(bm_today_postData);
        console.log(bm_week_postData);

        

        const App = () => {
          const { useState } = React;
          const [mainColor,setMainColor] = useState('#14AAEB');
          const [btnColor,setBtnColor] = useState('#F1DB15');
          const [postBorder,setPostBorder] = useState('');
          const [todayType,setTodayType] = useState('vb_today_postData');
          const [weekType,setWeekType] = useState('vb_week_postData');

          const changeType = (id)=>{
            let color = '';
            let btnColor ='';
            const border = document.querySelector(".content");
            let newBorder = '';

            // 取消其他按鈕的選擇
            const btnTypeVb = document.getElementById("btn-typeVb");
            const btnTypeBm = document.getElementById("btn-typeBm");
            
             if(id == "btn-typeBm"){
              color = '#6C9C07';
              btnColor ='#FF8D24';
              newBorder = 'url("../images/dogframe.png")';
              setTodayType('bm_today_postData') ;
              setWeekType('bm_week_postData') ;

              btnTypeVb.classList.remove("selected");
              btnTypeBm.classList.add("selected");
               
            }else if(id == "btn-typeVb"){
              color = '#14AAEB';
              btnColor ='#F1DB15';
              newBorder = 'url("../images/catframe.png")';
              setTodayType('vb_today_postData') ;
              setWeekType('vb_week_postData') ;

              btnTypeBm.classList.remove("selected");
              btnTypeVb.classList.add("selected");
            } 
            setMainColor(color);
            setBtnColor(btnColor);
            document.documentElement.style.setProperty('--main-color', color);
            document.documentElement.style.setProperty('--btn-color', btnColor);
            border.style.backgroundImage = newBorder;
        
          };
          
          const getPosts = (type) => {
                switch (type) {
                    case 'vb_today_postData':
                        return vb_today_postData;
                    case 'bm_today_postData':
                        return bm_today_postData;
                    case 'vb_week_postData':
                        return vb_week_postData;
                    case 'bm_week_postData':
                        return bm_week_postData;
                    default:
                        return [];
                }
            };
         
          // 元件
        // 貼文元件
        const PostCard = ({id,postDate, postTime, postCity, postArea, postArena,primaryTag,secondaryTag})=>{
         
          // const {key,date,time,city,area,arena,tag1,tag2} = props;
          return(<>
          <div className="content" id = {id} >
                      <div className="bg">
                        <div className="text">
                          <header>
                            <small>{postDate}</small>
                            <h3>{postTime}</h3>
                          </header>
                          <div className="subtext">
                            <small>{postCity}</small>
                            <small>{postArea}</small>
                          </div>
                          <h2 value ={`${postArena}`}>{postArena}</h2>
                          <div className="tag-content">                          
                            <small>{primaryTag}</small>                          
                            <small>{secondaryTag}</small>
                          </div>                       
                            <button id="apply" className = "CN-p">報名</button>                          
                        </div>                     
                      </div>
                      </div>
            
        </>);
        }
          return (
            <>
              <header id="topBar">
                <nav id="top-nav">
                  <ul id="menu">
                    <li>
                      <a href="./index.html">
                        <img
                          className="icon"
                          src="./images/magnifier.png"
                          alt=""
                        />
                        探索
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <img className="icon" src="./images/post.png" alt="" />
                        找人
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <img className="icon" src="./images/bell3.png" alt="" />
                        行程
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <img className="icon" src="./images/cat.png" alt="" />
                        個人
                      </a>
                    </li>
                  </ul>
                </nav>
              </header>
              <main className="index">
                <section className="search">
                  <div id="search-Type">
                    <button id="btn-typeVb" onClick ={ ()=>changeType('btn-typeVb')}>
                      <img src="./images/vball.png" alt="排球" />
                    </button>
                    <button id="btn-typeBm" onClick = {()=>changeType('btn-typeBm')}>
                      <img src="./images/bball.png" alt="羽球" />
                    </button>
                  </div>
                  <div id="search-Bar" style = {{backgroundColor:mainColor}} >
                    <div></div>
                    <div className="dropMenu">
                      <ul>
                        <input
                          className="dpMenu-item CN-p"
                          type="date"
                          name="日期"
                          id="date"
                          title="打球日"
                          required
                          style = {{color:mainColor}}
                        />
                        <select name="類型" id="type" className="dpMenu-item  CN-p">
                          <option value="default">類型</option>
                        </select>
                        <select name="程度" id="degree" className="dpMenu-item  CN-p">
                          <option value="default">程度</option>
                        </select>
                        <select name="時間" id="time" className="dpMenu-item  CN-p">
                          <option value="default">時間</option>
                        </select>
                        <select name="縣市" id="city" className="dpMenu-item  CN-p">
                          <option value="default">縣市</option>
                        </select>
                        <select name="費用" id="cost" className="dpMenu-item CN-p">
                          <option value="default">費用</option>
                        </select>
                      </ul>
                    </div>
                    <div>
                      <button className="btn-changeType">手機切換</button>
                      <button className="btn-send"><span className = "CN-p">送出</span></button>
                    </div>
                  </div>
                </section>
                {/* 本日臨打貼文 */}
                <section className="containers">
                  <header className="title-postArea">                
                    <h2><div></div>本日臨打貼文</h2>
                    <div className= "more">
                      <a href="#" className = "CN-p">更多</a>
                    </div>
                  </header>
                  <ul className="tags">
                    <button className = "tags-degree CN-p">B-</button>
                    <button  className = "tags-time CN-p">12-18</button>
                    <button  className = "tags-cost CN-p">200+</button>
                    <button  className = "tags-eqip CN-p">側燈</button>
                  </ul>
                  <div className="post-block">
                  {
                    getPosts(todayType).map((post_data)=>{
                        return(<PostCard key = {post_data.id} id = {post_data.id} postDate = {post_data.date} postTime = {post_data.time} postCity = {post_data.city} postArea = {post_data.area} postArena = {post_data.arena} primaryTag = {post_data.tag1} secondaryTag = {post_data.tag2} />)
                      })
                      
                  }
                  </div>
                </section> 
                {/* 本週臨打貼文 */}
                <section className="containers">
                  <header className="title-postArea">                
                    <h2><div></div>本週臨打貼文</h2>
                    <div className= "more">
                      <a href="#" className = "CN-p">更多</a>
                    </div>
                  </header>
                  <ul className="tags">
                    <button  className = "tags-degree CN-p">C</button>
                    <button  className = "tags-time CN-p">12-18</button>
                    <button  className = "tags-cost CN-p">150+</button>
                    <button  className = "tags-eqip CN-p">冷氣</button>
                  </ul>
                  <div className="post-block">
                  {
                    getPosts(weekType).map((post_data)=>{
                        return(<PostCard key = {post_data.id} id = {post_data.id} postDate = {post_data.date} postTime = {post_data.time} postCity = {post_data.city} postArea = {post_data.area} postArena = {post_data.arena} primaryTag = {post_data.tag1} secondaryTag = {post_data.tag2} />)
                      })
                      
                  }
                  </div>

                </section>            
              </main>
              <footer>
              <figure className="footer-border"></figure>
              <div><figure><img id="logo" src="./images/logo.png" alt="logo-PlayBallNow"/></figure>
              <p>Copyright© 2024 PlayBallNow. All Right Reserved. </p></div>
              
            </footer>
            </>
          );
        };
        ReactDOM.createRoot(document.getElementById("root")).render(<App />);
      })();


    </script>
  </body>
</html>
