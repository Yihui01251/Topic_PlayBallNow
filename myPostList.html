<!DOCTYPE html>
<html lang="zh-Hant-TW">
  <head>
    <title>我的貼文(現在想打球)</title>
    <link rel="stylesheet" href="./stylesheets/css/style-scss.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"
      integrity="sha512-1/8Tj23BRrWnKZXeBruk6wTnsMJbi/lJsk9bsRgVwb6j5q39n0A00gFjbCTaDo5l5XrPVv4DZXftrJExhRF/Ug=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
      .fileName {
        display: none;
      }
    </style>
  </head>
  <body id="body">
    <small class="fileName">檔名：<code>myPostList.html</code></small>
    <!-- 根元素  -->
    <div id="root"></div>
    <script type="text/babel">
      (async () => {
        //取得json資料
        const data = await axios.get("./userData.json");
        const { userData } = data.data;
        console.log(userData);
        const { future_host_userData } = userData[3];
        const { useState, useEffect, useRef, useMemo } = React;

        const Notify = ({
          day,
          startTime,
          endTime,
          type,
          city,
          area,
          arena,
          tagDegree,
          tagPrice,
          state,
          identity,
          id,
        }) => {
          const [typeStyle, setTypeStyle] = useState("");
          const [typeFontStyle, setTypeFontStyle] = useState("");
          const [stateStyle, setStateStyle] = useState("#1A8D07");
          const [identityStyle, setIdentityStyle] =
            useState("3px dashed black");
          const [popupHref, setPopupHref] = useState("");
          useEffect(() => {
            // 羽or排顏色
            let typeStyle = "";
            let typeFontStyle = "";
            let stateColor = "";
            if (type === "羽") {
              typeStyle = "rgba(131, 185, 15, 0.9)";
              typeFontStyle = "#689607";
            } else if (type === "排") {
              typeStyle = "#14AAEB";
              typeFontStyle = "#147CB6";
            }
            setTypeFontStyle(typeFontStyle);
            setTypeStyle(typeStyle);
            // document.documentElement.style.setProperty(
            //   "--font-color",
            //   typeFontStyle
            // );
            // document.documentElement.style.setProperty(
            //   "--main-color",
            //   typeStyle
            //);
          }, [type]);

          return (
            <>
              <a className="container-component" href={`#detailPostPopup-${id}`}>
                <div
                  className={"notice-container"}
                  style={{ color: typeFontStyle, border: identityStyle }}
                >
                  <div
                    className="notice-ballType"
                    style={{ backgroundColor: typeStyle }}
                  >
                    <p>{type}</p>
                  </div>
                  <div className="notice-info">
                    <div>
                      <p>
                        {day} {startTime}
                      </p>
                    </div>
                    <p>{arena}</p>
                    <div
                      style={{
                        color: stateStyle,
                        border: "1px solid",
                        stateStyle,
                      }}
                    >
                      <p>{state}</p>
                    </div>
                  </div>
                </div>
              </a>
              <DetailPostCard
                day={day}
                startTime={startTime}
                endTime={endTime}
                type={type}
                city={city}
                area={area}
                arena={arena}
                tagDegree={tagDegree}
                tagPrice={tagPrice}
                state={state}
                id={id}
                popUp={popupHref}
                typeStyle={typeStyle}
                typeFontStyle={typeFontStyle}
              />
            </>
          );
        };
        const DetailPostCard = ({
          day,
          startTime,
          endTime,
          type,
          city,
          area,
          arena,
          tagDegree,
          tagPrice,
          state,
          identity,
          id,
          typeStyle,
          typeFontStyle,
        }) => {
          return (
            <>
              <div className="popup" id={`detailPostPopup-${id}`}>
                <div className="popup-inner">
                  <div className="popup__content">
                    <div className="detailItinerary">
                      <div className="simplePostInfo">
                        <div className="main-info">
                          <div
                            className="header"
                            style={{ color: typeFontStyle }}
                          >
                            <p>
                              {day} {startTime}~{endTime}
                            </p>
                            <div
                              className="type-style"
                              style={{ backgroundColor: typeStyle }}
                            >
                              {type}球
                            </div>
                            <a className="popup__close" href="#">
                              <img src="../images/cancel.png" alt="" />
                            </a>
                          </div>
                          <div
                            className="areaInfo"
                            style={{ color: typeFontStyle }}
                          >
                            <p className="text-M">{city}</p>
                            <p className="text-M">{area}</p>
                            
                          </div>
                          <div
                            className="arenaInfo"
                            style={{ color: typeFontStyle }}
                          >
                            <h3>{arena}</h3>
                          </div>
                          <div className="tag-style">
                            <p style={{ color: typeFontStyle ,borderColor:typeFontStyle }}>{tagDegree}</p>
                            <p style={{ color: typeFontStyle ,borderColor:typeFontStyle}}>${tagPrice}</p>
                          </div>
                        </div>
                        <div className="sub-info">
                          <div className="vacancyInfo">
                            <h4>缺額</h4>
                            <div>女</div>
                            <p style={{ color: typeFontStyle }}>0 位</p>
                            <div>男</div>
                            <p style={{ color: typeFontStyle }}>3 位</p>
                            <div>不限</div>
                            <p style={{ color: typeFontStyle }}>2 位</p>
                          </div>
                          <div className="ballInfo">
                            <h4>類型</h4>
                            <p style={{ color: typeFontStyle }}>雙打</p>
                          </div>
                          <div className="equipInfo">
                            <h4>設備</h4>
                            <p style={{ color: typeFontStyle }}>冷氣</p>
                          </div>
                          <div className="noteInfo">
                            <h4>備註</h4>
                            <p style={{ color: typeFontStyle }}>
                              請提早10分鐘到場換裝熱身
                            </p>
                          </div>
                        </div>

                        <div className="auditList">
                          <div className="sponsored-title">
                            <div className="line-hugTitle">
                              <div className="titleLine"></div>
                              <h3>球友申請列表</h3>
                              <small> (已徵{state})</small>
                            </div>
                            <div className="titleArrowBtn">
                              <button>
                                <img
                                  src="../images/btn-left.png"
                                  alt="前一個"
                                />
                              </button>
                              <button>
                                <img
                                  src="../images/btn-right.png"
                                  alt="後一個"
                                />
                              </button>
                            </div>
                          </div>
                          <div className="applicant-container">
                            <a href={`#detailApplyPopup-${id}`}>
                              <img
                                className="img-border"
                                src="../images/player.png"
                                alt=""
                              />
                              <div className="notice-new">New</div>
                            </a>

                            <a href={`#detailApplyPopup-2`}>
                              <img
                                className="img-border"
                                src="../images/player-agree.png"
                                alt=""
                              />
                            </a>
                          </div>
                        </div>

                        <div className="auditList">
                          <div className="sponsored-title">
                            <div className="line-hugTitle">
                              <div className="titleLine"></div>
                              <h3>取消申請列表</h3>
                            </div>
                          </div>
                          <div className="applicant-container">
                            <a href={`#auditCancelPopup-${id}`}>
                              <img
                                className="img-border"
                                src="../images/bball.png"
                                alt=""
                              />
                              <div className="notice-new">New</div>
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <AuditApplyCard
                day={day}
                startTime={startTime}
                type={type}
                arena={arena}
                state={state}
                id={id}
              />
              <AuditCancelCard
                day={day}
                startTime={startTime}
                type={type}
                arena={arena}
                state={state}
                id={id}
              />
            </>
          );
        };

        const AuditApplyCard = ({ day, startTime, type, arena, state, id }) => {
          const [btnDisplay, setBtnDisplay] = useState("flex");
          const [resultDisplay, setResultDisplay] = useState("none");
          const [resultText, setResultText] = useState("");
          const [resultColor, setResultColor] = useState("#1A8D07");
          const auditResult = (type) => {
            let text = "";

            setBtnDisplay("none");
            setResultDisplay("block");
            if (type === "no") {
              text = "已婉拒";
              setResultColor("#FF4F03");
            } else if (type === "yes") {
              text = "接受申請";
            }
            setResultText(text);
          };

          return (
            /* 燈箱效果-=團主審核報名元件 */
            <div className="popup" id={`detailApplyPopup-${id}`}>
              <div className="popup-inner">
                <div className="popup__content">
                  {/* 團主審核報名元件 */}
                  <div className="audit-apply">
                    <div className="topBtn-container">
                      <a href="#">
                        <img src="../images/waring.png" alt="" />
                      </a>
                      <a className="popup__close" href="#">
                        <img src="../images/cancel.png" alt="" />
                      </a>
                    </div>
                    <div className="audit-info">
                      <div className="info-selfState">
                        <div className="selfState-userInfo">
                          <img
                            className="applicantImg"
                            src="../images/player.png"
                            alt=""
                          />
                          <div className="attendance">
                            <p className="text-M">85%</p>
                            <img src="../images/EllipseBar_vb.png" alt="" />
                          </div>
                          <p className="userInfo">中上</p>
                        </div>
                        <div className="selfState-title">
                          <p>Roy</p>
                          <p>出席率</p>
                          <p>自評等級</p>
                        </div>
                      </div>
                      <div className="info-remark">
                        <h5>備註（僅限自己可看）：</h5>
                        <p>這個人很愛放鴿子</p>
                      </div>
                      <div className="notice-container">
                        <div className="notice-ballType">
                          <p>{type}</p>
                        </div>
                        <div className="notice-info">
                          <div>
                            <p>
                              {day} {startTime}
                            </p>
                          </div>
                          <p>{arena}</p>
                          <div className="audit-state">
                            <p>{state}</p>
                          </div>
                        </div>
                      </div>
                      <div className="info-applicantNote">
                        <h5>報名備註：</h5>
                        <p>下班若塞車可能會晚到15分鐘</p>
                      </div>
                      <div
                        className="bottomBtn-container"
                        style={{ display: btnDisplay }}
                      >
                        <button
                          className="button btn-no"
                          onClick={() => auditResult("no")}
                        >
                          婉拒
                        </button>
                        <button
                          className="button btn-yes"
                          onClick={() => auditResult("yes")}
                        >
                          同意
                        </button>
                      </div>
                      <div
                        className="audit-state audit-yes"
                        style={{
                          display: resultDisplay,
                          color: resultColor,
                          borderColor: resultColor,
                        }}
                      >
                        <p>{resultText}</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          );
        };
        const AuditCancelCard = ({day, startTime, type, arena, state, id})=>{
            const [btnDisplay, setBtnDisplay] = useState("flex");
          const [resultDisplay, setResultDisplay] = useState("none");
          const [resultText, setResultText] = useState("");
          const [resultColor, setResultColor] = useState("#1A8D07");
          const auditResult = (type) => {
            let text = "";

            setBtnDisplay("none");
            setResultDisplay("block");
            if (type === "no") {
              text = "已婉拒";
              setResultColor("#FF4F03");
            } else if (type === "yes") {
              text = "同意取消";
            }
            setResultText(text);
          };
            return(
                <div className="popup" id={`auditCancelPopup-${id}`}>
        <div className="popup-inner">
          <div className="popup__content">
            
            <div className="audit-apply">
              <div className="topBtn-container">
                <a href="#"><img src="../images/waring.png" alt="" /></a>
                <a className="popup__close" href="#"
                  ><img src="../images/cancel.png" alt=""
                /></a>
              </div>
              <div className="audit-info">
                <div className="info-selfState">
                  <div className="selfState-userInfo">
                    <div className="applicantInfo">
                      <img className="applicantImg" src="../images/player.png" alt="" />
                      <p>Roy</p>
                    </div>
                    <div className="reason-cancel">
                      <h5>取消原因:</h5>
                      <p>手受傷</p>
                    </div>
                  </div>
                  <div className="selfState-title"><h4>取消場次 :</h4></div>
                </div>
      
                <div className="notice-container">
                        <div className="notice-ballType">
                          <p>{type}</p>
                        </div>
                        <div className="notice-info">
                          <div>
                            <p>
                              {day} {startTime}
                            </p>
                          </div>
                          <p>{arena}</p>
                          <div className="audit-state">
                            <p>{state}</p>
                          </div>
                        </div>
                      </div>
      
                <div className="bottomBtn-container" style={{ display: btnDisplay }}>
                    <button
                          className="button btn-no"
                          onClick={() => auditResult("no")}
                        >
                          婉拒
                        </button>
                        <button
                          className="button btn-yes"
                          onClick={() => auditResult("yes")}
                        >
                          同意
                        </button>
                </div>
                <div
                        className="audit-state audit-yes"
                        style={{
                          display: resultDisplay,
                          color: resultColor,
                          borderColor: resultColor,
                        }}
                      >
                        <p>{resultText}</p>
              </div>
            </div>
          </div>
        </div>
      </div></div>
            )
        }
        const App = () => {
          return (
            <div className="body">
              <main style={{ marginBottom: "45vh" }}>
                <div className="mobile-TopBar">
                  <img
                    src="./images/mobile-both-topbanner.png"
                    alt="不分類的手機版banner"
                  />
                </div>
                <header id="topBar">
                  <nav id="top-nav">
                    <ul id="menu">
                      <li>
                        <a href="./index.html">
                          <img
                            className="icon"
                            src="./images/magnifier.png"
                            alt=""
                          />
                          探索
                        </a>
                      </li>
                      <li>
                        <a href="./publicationForm.html">
                          <img
                            className="icon"
                            src="./images/post.png"
                            alt=""
                          />
                          找人
                        </a>
                      </li>
                      <li>
                        <a href="notice.html">
                          <img
                            className="icon"
                            src="./images/bell3.png"
                            alt=""
                          />
                          行程
                        </a>
                      </li>
                      <li>
                        <a href="personal.html">
                          <img className="icon" src="./images/cat.png" alt="" />
                          個人
                        </a>
                      </li>
                    </ul>
                  </nav>
                  <div className="title">
                    <div className="hugTitle">
                      <h1 className="title-L" value="我的貼文">
                        我的貼文
                      </h1>
                    </div>
                  </div>
                </header>
                <section className="notice-itineraryArea">
                  {future_host_userData.map((post_data) => {
                    return (
                      <Notify
                        key={post_data.id}
                        type={post_data.typeAbbr}
                        identity={post_data.identity}
                        day={post_data.dateAbbr}
                        startTime={post_data.startTime}
                        endTime={post_data.endTime}
                        city={post_data.city}
                        area={post_data.area}
                        arena={post_data.arena}
                        tagDegree={post_data.tagDegree}
                        tagPrice={post_data.tagPrice}
                        state={post_data.state}
                        id={post_data.id}
                      />
                    );
                  })}
                </section>
              </main>
              <footer>
                <figure className="footer-border"></figure>
                <div>
                  <figure>
                    <img
                      id="logo"
                      src="./images/logo.png"
                      alt="logo-PlayBallNow"
                    />
                  </figure>
                  <p>Copyright© 2024 PlayBallNow. All Right Reserved. </p>
                </div>
              </footer>
            </div>
          );
        };
        ReactDOM.createRoot(document.getElementById("root")).render(<App />);
      })();
    </script>
  </body>
</html>
