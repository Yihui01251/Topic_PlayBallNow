<!DOCTYPE html>
<html lang="zh-Hant-TW">
  <head>
    <title>個人</title>
    <link rel="stylesheet" href="./stylesheets/css/style-scss.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="UTF-8" />
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"
      integrity="sha512-1/8Tj23BRrWnKZXeBruk6wTnsMJbi/lJsk9bsRgVwb6j5q39n0A00gFjbCTaDo5l5XrPVv4DZXftrJExhRF/Ug=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <style>
      .fileName {
        display: none;
      }
    </style>
    <!-- 載入axios套件 -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>

  <body id="body">
    <small class="fileName">檔名：<code>personal.html</code></small>
    <!-- 根元素  -->
    <div id="root"></div>
    <script type="text/babel">
      (async () => {
        const data = await axios.get("./userData.json");
        const { userData } = data.data;
        console.log(userData);
        const { past_appl_userData } = userData[5];
        const { past_host_userData } = userData[6];

        const { useState, useEffect } = React;

        const TopBar = () => {
          return (
            <>
              <div className="mobile-TopBar">
                <img
                  src="./images/mobile-both-topbanner.png"
                  alt="不分類的手機版banner"
                />
              </div>
              <header id="topBar">
                <nav id="top-nav">
                  <ul id="menu">
                    <li>
                      <a href="./index.html">
                        <img
                          className="icon"
                          src="./images/magnifier.png"
                          alt=""
                        />
                        探索
                      </a>
                    </li>
                    <li>
                      <a href="./publicationForm.html">
                        <img className="icon" src="./images/post.png" alt="" />
                        找人
                      </a>
                    </li>
                    <li>
                      <a href="notice.html">
                        <img className="icon" src="./images/bell3.png" alt="" />
                        行程
                      </a>
                    </li>
                    <li>
                      <a href="personal.html">
                        <img className="icon" src="./images/cat.png" alt="" />
                        個人
                      </a>
                    </li>
                  </ul>
                </nav>
                <div className="form-title">
                  <div className="hugTitle noto-sans-tc">
                    <img src="./images/vbtitle.svg" alt="" />
                    <h1 className="title-L" value="個人檔案">
                      個人檔案
                    </h1>
                    <img src="./images/bmtitle.svg" alt="" />
                  </div>
                  <a href="register.html" className="button" id="btn-editFile">
                    資料編輯
                    <img
                      src="./images/icon-editFile.png"
                      alt="資料編輯的icon公事包"
                    />
                  </a>
                </div>
              </header>
            </>
          );
        };

        const App = () => {
          const [loginBtn, setLoginBtn] = useState("");
          const [infoState, setInfoState] = useState("none");
          const [userName, setUserName] = useState("十全大補");
          const [userPhoto, setUserPhoto] = useState("./images/player.png");
          const [userSex, setUserSex] = useState("未知");
          const [sexIcon, setSexIcon] = useState("./images/icon-male.png");
          const [userIntro, setUserIntro] = useState("很高興認識大家!");
          const [userBmDegree, setUserBmDegree] = useState("");
          const [userVbDegree, setUserVbDegree] = useState("");
          const [registerState, setRegisterState] = useState("false");

          useEffect(() => {
            setRegisterState(window.localStorage.isRegister);
            if (registerState == "true") {
              console.log("已註冊過");
              setLoginBtn("none");
              setInfoState("block");
              setUserName(window.localStorage.userName);
              setUserPhoto(window.localStorage.userPhoto);
              setUserSex(window.localStorage.userSex);
              setUserIntro(window.localStorage.userIntro); 
              setUserBmDegree(window.localStorage.BmDegree);
              setUserVbDegree(window.localStorage.VbDegree);
            } else {
              setLoginBtn("flex");
              setInfoState("none");
            }
            if (userSex == "女") {
              setSexIcon("./images/icon-female.png");
            }
          }, [registerState, setRegisterState, userSex]);

          const Records = ({ type, date, startTime }) => {
            // const [isSponsor,setIsSponsor]=useState("none");
            // useEffect(()=>{
            //   if(identity==="團主"){
            //     setIsSponsor("flex");
            //   }
            // })
            return (
              <>
                <a style={{ display: infoState }} href="#">
                  <div className="info-time">
                    <div>{type}</div>
                    <p>
                      {date} {startTime}
                    </p>
                  </div>
                </a>
              </>
            );
          };
          return (
            <div className="body hiFooter">
              <TopBar />
              <main className="personal-Area">
                <div className="personalArea-infoContainer">
                  <div className="infoContainer-biography">
                    <div className="biography-bust">
                      <figure style={{ display: loginBtn }}>
                        <img src="./images/bball.png" alt="排球頭像" />
                      </figure>
                      <figure style={{ display: infoState }}>
                        <img src={userPhoto} alt="假頭像" />
                      </figure>
                      <a href="/register.html" style={{ display: loginBtn }}>
                        <button className="btn-logInLine">
                          Line登入
                          <img src="./images/icon-LINE.png" alt="" />
                        </button>
                      </a>
                      <div style={{ display: infoState }}>
                        <div className="userName">
                          <img src={sexIcon} alt="" />
                          <p className="hugTitle title-M" value={userName}>
                            {userName}
                          </p>
                        </div>
                      </div>
                    </div>
                    <div className="biography-info">
                      <div className="info-introduction">
                        <p
                          style={{
                            display: loginBtn,
                            justifyContent: "center",
                          }}
                        >
                          登入後可輸入狀態
                        </p>
                        <p style={{ display: infoState, color: "black" }}>
                          {userIntro}
                        </p>
                      </div>
                      <div className="info-selfState">
                        <div style={{ display: infoState }}>
                          <div className="selfState-userInfo">
                            <p className="userInfo">13</p>
                            <div className="attendance">
                              <p className="text-M">85%</p>
                              <img src="./images/ellipsebarbm.png" alt="" />
                            </div>
                            <p className="userInfo">
                              {userBmDegree == "" ? userVbDegree : userBmDegree}
                            </p>
                          </div>
                        </div>
                        <div className="selfState-title">
                          <p>累積場次</p>
                          <p>出席率</p>
                          <p>自評等級</p>
                        </div>
                        <div className="prompt" style={{ display: loginBtn }}>
                          <p>登入顯示</p>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div className="infoContainer-records">
                    <div className="records-sponsored">
                      <div className="sponsored-title">
                        <div className="line-hugTitle">
                          <div className="titleLine"></div>
                          <h2>團主紀錄</h2>
                        </div>

                        <div className="titleArrowBtn">
                          <button>
                            <img src="./images/btn-left.png" alt="前一個" />
                          </button>
                          <button>
                            <img src="./images/btn-right.png" alt="後一個" />
                          </button>
                        </div>
                      </div>
                      <div className="prompt" style={{ display: loginBtn }}>
                        <p>登入顯示</p>
                      </div>
                      <div className="records-info">
                        {past_host_userData.map((data) => {
                          return (
                            <Records
                              key={data.id}
                              type={data.typeAbbr}
                              date={data.dateAbbr}
                              startTime={data.startTime}
                            />
                          );
                        })}
                      </div>
                    </div>
                    <div className="records-sponsored">
                      <div className="sponsored-title">
                        <div className="line-hugTitle">
                          <div className="titleLine"></div>
                          <h2>臨打紀錄</h2>
                        </div>

                        <div className="titleArrowBtn">
                          <button>
                            <img src="./images/btn-left.png" alt="前一個" />
                          </button>
                          <button>
                            <img src="./images/btn-right.png" alt="後一個" />
                          </button>
                        </div>
                      </div>
                      <div className="prompt" style={{ display: loginBtn }}>
                        <p>登入顯示</p>
                      </div>
                      <div className="records-info">
                        {past_appl_userData.map((data) => {
                          return (
                            <Records
                              key={data.id}
                              type={data.typeAbbr}
                              date={data.dateAbbr}
                              startTime={data.startTime}
                            />
                          );
                        })}
                      </div>
                    </div>
                  </div>
                </div>
              </main>
              <footer>
                <figure className="footer-border"></figure>
                <div>
                  <figure>
                    <img
                      id="logo"
                      src="./images/logo.png"
                      alt="logo-PlayBallNow"
                    />
                  </figure>
                  <p>Copyright© 2024 PlayBallNow. All Right Reserved. </p>
                </div>
              </footer>
            </div>
          );
        };
        ReactDOM.createRoot(document.getElementById("root")).render(<App />);
      })();
    </script>
  </body>
</html>
