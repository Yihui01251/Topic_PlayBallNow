<!DOCTYPE html>
<html lang="zh-Hant-TW">
  <html>
    <head>
      <title>元件化發文表單</title>
      <link rel="stylesheet" href="./stylesheets/style.css" />
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <meta charset="UTF-8" />
      <!-- <script src="./javascripts/vendor.js"></script> -->
      <script
        crossorigin
        src="https://unpkg.com/react@18/umd/react.development.js"
      ></script>
      <script
        crossorigin
        src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"
      ></script>
      <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
      <script
        src="https://cdnjs.cloudflare.com/ajax/libs/redux/4.2.0/redux.min.js"
        integrity="sha512-1/8Tj23BRrWnKZXeBruk6wTnsMJbi/lJsk9bsRgVwb6j5q39n0A00gFjbCTaDo5l5XrPVv4DZXftrJExhRF/Ug=="
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
      ></script>
      <style>
        .fileName {
          display: none;
        }
      </style>
    </head>
    <body id="body">
      <small class="fileName">檔名：<code>react_publicationForm.html</code></small>
      <!-- 根元素  -->
      <div id="root"></div>
      <script type="text/babel">
        (async () => {
          const FormField = ({
            label,
            name,
            value,
            onChange,
            type = "text",
          }) => {
            return (
              <label htmlFor={name}>
                {label}
                <input
                  type={type}
                  id={name}
                  name={name}
                  value={value}
                  onChange={(e) => onChange(name, e.target.value)}
                />
              </label>
            );
          };

          const SelectField = ({ label, name, value, onChange, options }) => {
            return (
              <label htmlFor={name}>
                {label}
                <select
                  id={name}
                  name={name}
                  value={value}
                  onChange={(e) => onChange(name, e.target.value)}
                >
                  {options.map((option) => (
                    <option key={option} value={option}>
                      {option}
                    </option>
                  ))}
                </select>
              </label>
            );
          };

          const TextAreaField = ({ label, name, value, onChange }) => {
            return (
              <label htmlFor={name}>
                {label}
                <textarea
                  id={name}
                  name={name}
                  value={value}
                  onChange={(e) => onChange(name, e.target.value)}
                />
              </label>
            );
          };
          const PreviewSection = ({
            postDate,
            postStartTime,
            postEndTime,
            postType,
            postCity,
            postArea,
            postArena,
            postDegree,
            postCost,
            postFemale,
            postMale,
            postUnspecified,
            postRole,
            postPosition,
            postNote,
          }) => {
            return (
              <div className="form-review">
                <div className="sub-title">
                  <h2>
                    <div></div>預覽
                  </h2>
                </div>
                <div className="filter-simplePostInfo">
                  <div className="main-info">
                    <header>
                      <p className="text-L">
                        {postDate} {postStartTime}~{postEndTime}
                      </p>
                      <div className="type-style">{postType}</div>
                      <button className="collect">
                        <img src="./images/heart.png" alt="收藏" />
                      </button>
                    </header>
                    <div className="areaInfo">
                      <h3>{postCity}</h3>
                      <h3>{postArea}</h3>
                      <h3>{postArena}</h3>
                    </div>
                    <div className="tag-style">
                      <p className="text-S">{postDegree}</p>
                      <p className="text-S">${postCost}</p>
                    </div>
                  </div>
                  <div className="sub-info">
                    <div className="vacancyInfo">
                      <h4>缺額</h4>
                      <div>女</div>
                      <p>{postFemale}位</p>
                      <div>男</div>
                      <p>{postMale}位</p>
                      <div>不限</div> <p>{postUnspecified}位</p>
                    </div>
                    <div className="ballInfo">
                      <h4>類型</h4>
                      <p>{postRole}</p>
                    </div>
                    <div className="equipInfo">
                      <h4>位置</h4>
                      <p>{postPosition}</p>
                    </div>
                    <div className="noteInfo">
                      <h4>備註</h4>
                      <p>{postNote}</p>
                    </div>
                  </div>
                  <div>
                    {" "}
                    <button id="apply">報名</button>
                  </div>
                </div>
                <button className="btn-send">送出</button>
              </div>
            );
          };
          const App = () => {
            const { useState, useEffect, useRef } = React;

            const [selectedButton, setSelectedButton] = useState("btn-typeVb");

            const btnFormVbRef = useRef(null);
            const btnFormBmRef = useRef(null);

            useEffect(() => {
              // 組件載入後，將焦點設置到 btn-typeVb 按鈕上
              // btnFormBmRef.current.focus();
            }, []);
            const changeType = (id) => {
              // let newBackground = "";
              let colorMain = "";
              let colorFont = "";
              let btnColor = "";
              let newBorder = "";
              let type = "";

              // 取消其他按鈕的選擇
              // const btnFormVb = document.getElementById("btn-formVB");
              // const btnFormBm = document.getElementById("btn-formBM");
              const bodyStyle = document.getElementById("body");

              if (id == "btn-formBM") {
                colorMain = "#6C9C07";
                colorFont = "#689607";
                btnColor = "#FF8D24";
                type = "羽球";

                // 新增class改變背景
                bodyStyle.classList.add("background-Bm");
                bodyStyle.classList.remove("background-Vb");
                setSelectedButton("btn-formBM");
              } else if (id == "btn-formVB") {
                // newBackground = 'url("../images/catBg.jpg")';
                colorMain = "#14AAEB";
                colorFont = "#147CB6";
                btnColor = "#F1DB15";
                type = "排球";

                bodyStyle.classList.remove("background-Bm");
                bodyStyle.classList.add("background-Vb");
                setSelectedButton("btn-formVB");
              }
              setMainColor(colorMain);
              setFontColor(colorFont);
              setBtnColor(btnColor);
              setPostType(type);
              document.documentElement.style.setProperty(
                "--main-color",
                colorMain
              );
              document.documentElement.style.setProperty(
                "--font-color",
                colorFont
              );
              document.documentElement.style.setProperty(
                "--btn-color",
                btnColor
              );
            };

            const [formData, setFormData] = useState({
              postDate: "4/24",
              postStartTime: "18:00",
              postEndTime: "20:00",
              postType:"排球",
              postCity: "台北市",
              postArea: "中正區",
              postArena: "中正運動中心",
              postRole: "女網混排",
              postCost: "250",
              postFemale: "1",
              postMale: "1",
              postUnspecified: "3",
              postDegree: "程度不拘",
              postNote: "請不要放鴿子",
              postPosition: "無要求",
            });

            const handleChange = (name, value) => {
              setFormData({ ...formData, [name]: value });
            };

            return (
              <>
                <header id="topBar">
                  <nav id="top-nav">
                    <ul id="menu">
                      <li>
                        <a href="./index.html">
                          <img
                            className="icon"
                            src="./images/magnifier.png"
                            alt=""
                          />
                          探索
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <img
                            className="icon"
                            src="./images/post.png"
                            alt=""
                          />
                          找人
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <img
                            className="icon"
                            src="./images/bell3.png"
                            alt=""
                          />
                          行程
                        </a>
                      </li>
                      <li>
                        <a href="#">
                          <img className="icon" src="./images/cat.png" alt="" />
                          個人
                        </a>
                      </li>
                    </ul>
                  </nav>
                </header>

                <main className="form-formArea">
                  <div className="form-title">
                    <div className="hug-h1">
                      <h1 value="發文找人" className="title-L">
                        發文找人
                      </h1>
                    </div>

                    <button id="btn-postManage">
                      貼文管理
                      <figure>
                        <img src="./images/Vector.png" alt="" />
                      </figure>
                    </button>
                  </div>
                  <section className="form-container">
                    <div className="form-block">
                      <div className="form-type">
                        <button
                          id="btn-formBM"
                          ref={btnFormBmRef}
                          className={
                            selectedButton === "btn-formBM" ? "selected" : ""
                          }
                          onClick={() => changeType("btn-formBM")}
                        >
                          打羽球
                        </button>

                        <button
                          id="btn-formVB"
                          ref={btnFormVbRef}
                          className={
                            selectedButton === "btn-formVB" ? "selected" : ""
                          }
                          onClick={() => changeType("btn-formVB")}
                        >
                          打排球
                        </button>
                      </div>

                      <div className="form-edit">
                        <div className="sub-title">
                          <h2>
                            <div></div>必填資訊
                          </h2>
                        </div>
                        <div className="form-options">
                          <FormField
                            label="日期"
                            name="postDate"
                            value={formData.postDate}
                            onChange={handleChange}
                          />
                          <FormField
                            label="時段"
                            name="postStartTime"
                            value={formData.postStartTime}
                            onChange={handleChange}
                            type="time"
                          />
                          <FormField
                            label="~"
                            name="postEndTime"
                            value={formData.postEndTime}
                            onChange={handleChange}
                            type="time"
                          />
                          <SelectField
                            label="地區"
                            name="postCity"
                            value={formData.postCity}
                            onChange={handleChange}
                            options={["台北市", "新北市", "桃園市"]}
                          />
                          <FormField
                            label="費用"
                            name="postCost"
                            value={formData.postCost}
                            onChange={handleChange}
                            type="number"
                          />
                          <FormField
                            label="女性缺額"
                            name="postFemale"
                            value={formData.postFemale}
                            onChange={handleChange}
                            type="number"
                          />
                          <FormField
                            label="男性缺額"
                            name="postMale"
                            value={formData.postMale}
                            onChange={handleChange}
                            type="number"
                          />
                          <FormField
                            label="不限缺額"
                            name="postUnspecified"
                            value={formData.postUnspecified}
                            onChange={handleChange}
                            type="number"
                          />
                          <SelectField
                            label="程度"
                            name="postDegree"
                            value={formData.postDegree}
                            onChange={handleChange}
                            options={[
                              "初學者",
                              "入門",
                              "中等",
                              "高級",
                              "專家",
                              "程度不拘",
                            ]}
                          />
                          <TextAreaField
                            label="備註"
                            name="postNote"
                            value={formData.postNote}
                            onChange={handleChange}
                          />
                          <SelectField
                            label="場上位置"
                            name="postPosition"
                            value={formData.postPosition}
                            onChange={handleChange}
                            options={[
                              "無要求",
                              "主攻手",
                              "副攻手",
                              "自由人",
                              "替補",
                            ]}
                          />
                        </div>
                      </div>
                    </div>
                    <PreviewSection {...formData} />
                  </section>
                </main>
              </>
            );
          };
          ReactDOM.createRoot(document.getElementById("root")).render(<App />);
        })();
      </script>

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css"
      />
    </body>
</html>
</html>
